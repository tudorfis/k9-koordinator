var mainCtrl=function($scope){var s=$scope;rs.parseStyle=function(f,from,to){if(s[f]){var eval_html=s.$eval("'"+$(from).html()+"'");$(to).html(eval_html)}}};var transformRequestAsFormPost=function(){function transformRequest(data,getHeaders){var headers=getHeaders();headers["Content-type"]="application/x-www-form-urlencoded; charset=utf-8";return serializeData(data)}function serializeData(data){if(!a.isObject(data)){return data==null?"":data.toString()}var buffer=[];for(var name in data){if(!data.hasOwnProperty(name)){continue}var value=data[name];if(typeof value=="object"){value=JSON.stringify(value)}buffer.push(encodeURIComponent(name)+"="+encodeURIComponent(value==null?"":value))}var source=buffer.join("&").replace(/%20/g,"+");return source}return transformRequest};var httpInterceptor=function($q,$log){var loadingCount=0;return{request:function(config){if(++loadingCount===1)rs.$broadcast("loading:progress");return config||$q.when(config)},response:function(response){if(--loadingCount===0)rs.$broadcast("loading:finished");return response||$q.when(response)},responseError:function(response){if(--loadingCount===0)rs.$broadcast("loading:error");return $q.reject(response)}}};var apiService=function($http,$q,config,transformRequestAsFormPost){var api=config.api,api_r=config.api_r,token=config.token,env=config.env;this.get=function(table,id,method,extra_json,url_method){var url=url_method?api+url_method:api,deffered=$q.defer(),result={};data={token:token,env:env};if(table){data=a.extend(data,{table:table})}if(id){data=a.extend(data,{id:id})}if(method){data=a.extend(data,{method:method})}if(extra_json){data=a.extend(data,extra_json)}data=a.extend(data,{cache:true});var request=$http.get(url,{params:data});request.success(function(r){if(r.r){r.r.is_error=false;deffered.resolve(r.r)}else{deffered.resolve(r)}});request.error(function(r){r_r=r;r={r:r_r,is_error:true};deffered.resolve(r)});return deffered.promise};this.post=function(table,id,postData,method,extra_data){var deffered=$q.defer(),result={},f_data={};a.forEach(postData,function(item,k){if(typeof item!="object"||item==null){f_data[k]=item}});var data={token:token,env:env,table:table,data:f_data};if(id!==undefined&&id!==null&&id!==""){data=a.extend(data,{id:id})}if(method!==undefined){data=a.extend(data,{method:method})}if(extra_data){data=a.extend(data,extra_data)}var request=$http({method:"post",url:api+"/post",transformRequest:transformRequestAsFormPost,data:data});request.success(function(r){r.r.is_error=false;deffered.resolve(r.r)});request.error(function(r){r_r=r;r={r:r_r,is_error:true};deffered.resolve(r)});return deffered.promise};this.query=function(table,query,method){var deffered=$q.defer(),data={token:token,env:env,table:table,query:query};if(method){data=a.extend(data,{method:method})}var request=$http({method:"get",url:api+"/query",transformRequest:transformRequestAsFormPost,params:data});request.success(function(r){r.is_error=false;deffered.resolve(r.r)});request.error(function(r){r_r=r;r={r:r_r,is_error:true};deffered.resolve(r)});return deffered.promise};this.delete=function(table,id,extra_json,method){var deffered=$q.defer(),result={};var data={token:token,env:env,table:table,id:id};if(extra_json!==undefined){data=a.extend(data,extra_json)}if(method!==undefined){data=a.extend(data,{method:method})}var request=$http({method:"get",url:api+"/delete",params:data});request.success(function(r){r.r.is_error=false;deffered.resolve(r.r)});request.error(function(r){r_r=r;r={r:r_r,is_error:true};deffered.resolve(r)});return deffered.promise};this.geoLocation=function(search,from_length,to_length,country){country=country||"USA";deffered=$q.defer();if(rs.isNumberic(pF(search))&&(search.length>=from_length&&search.length<=to_length)){var geocoder=new google.maps.Geocoder;geocoder.geocode({address:search+", "+country},function(results,status){if(status==google.maps.GeocoderStatus.OK){var street="",city="",state="",zip="",country="";a.forEach(results[0].address_components,function(item){if(item.types[0]=="route"){street=item.long_name}else if(item.types[0]=="locality"){city=item.long_name}else if(item.types[0]=="administrative_area_level_1"){state=item.short_name}else if(item.types[0]=="postal_code"){zip=item.long_name}else if(item.types[0]=="country"){country=item.short_name}});var data={street:street,city:city,state:state,zip:zip,country:country};deffered.resolve(data)}})}return deffered.promise}};var modelsService=function(api,$q){this.getModels=function(tables_arr,id,method,extra_json){var self=this,deffered=$q.defer();rs.is_models=true;var tables="";for(var i in tables_arr){var table=tables_arr[i];tables+=table+","}tables=tables.substring(0,tables.length-1);if(tables){api.get(tables,id,method,extra_json).then(function(r){for(var i in tables_arr){var table=tables_arr[i],data=r.multiple?r.multiple[table].data:r.data;data=self.makeIntegerFloatValue(table,data);rs[table]=data}deffered.resolve(r.multiple)})}return deffered.promise};this.makeIntegerFloatValue=function(table,data){var checkValues=function(value){if(value=="true"){return true}else if(value=="false"){return false}else if(value!==false&&value!==true&&rs.isInteger(value,1)){return parseInt(value)}else if(value!==false&&value!==true&&rs.isFloat(value,1)){return parseFloat(value)}else{return value}};if(table.indexOf("settings")!="-1"){a.forEach(data,function(v,n){data[n]=checkValues(v)})}else{a.forEach(data,function(item,id){if(item.id){item.id=parseInt(item.id)}a.forEach(item,function(column,key){item[key]=checkValues(column)})})}return data}};var commonDirectives=commonDirectives||{};commonDirectives.Bootstrap={};var renderDatepicker=function(el,type,$compile,cFunc){if(!el.attr("id")){el.attr("id",rs.uid())}var iconTemplate="<a ng-click=\"focusOnId('"+el.attr("id")+"')\">"+' <img src="img/calendar.png" class="calendar" /> '+"</a>"+'<div class="clearfix">&nbsp;</div>';el.after($compile(iconTemplate)(rs));if(type=="us"){el.fdatepicker()}else{el.fdatepicker({format:"yyyy-mm-dd"})}};commonDirectives.Bootstrap.Datepicker=function($compile,cFunc){return{restrict:"AEC",link:function(s,el,atts){if(el[0].tagName.toLowerCase()=="input"){renderDatepicker(el,"",$compile,cFunc)}}}};commonDirectives.Bootstrap.DatepickerUs=function($compile,cFunc){return{restrict:"AEC",link:function(s,el,atts){if(el[0].tagName.toLowerCase()=="input"){renderDatepicker(el,"us",$compile,cFunc)}}}};var renderTimepicker=function(el,$compile,cFunc){if(!el.attr("id")){el.attr("id",rs.uid())}var iconTemplate="<a ng-click=\"focusOnId('"+el.attr("id")+"')\">"+' <img src="img/clock.png" class="clock" />'+"</a>"+'<div class="clearfix">&nbsp;</div>';el.after($compile(iconTemplate)(rs));el.timepicker({showCloseButton:true})};commonDirectives.Bootstrap.Timepicker=function($compile,cFunc){return{restrict:"AEC",link:function(s,el,atts){if(el[0].tagName.toLowerCase()=="input"){renderTimepicker(el,$compile,cFunc,rs)}}}};commonDirectives.Bootstrap.Colorpicker=function($timeout){return{restrict:"AEC",link:function(s,el,atts){$timeout(function(){el.spectrum({showInitial:true,showInput:true,preferredFormat:3})},1)}}};commonDirectives.Bootstrap.Fancybox=function($timeout){return{restrict:"AEC",link:function(s,el,atts){$timeout(function(){el.fancybox({helpers:{overlay:{locked:false}}})},1)}}};commonDirectives.Bootstrap.Clearable=function(){function tog(v){return v?"addClass":"removeClass"}$(document).on("input",".clearable",function(){var self=$(this);self[tog(this.value)]("onX")}).on("change",".clearable",function(){var self=$(this);if(self.val()==""){self.removeClass("onX")}else{self.addClass("onX")}});return{restrict:"AEC",link:function(s,el,atts){$("#MainCtrl").on("click",".onX",function(){$(this).removeClass("x onX").val("");var model=$(this).attr("ng-model"),arr=model.split(".");if(arr.length>1){model=arr[1]}s[model]="";s.$digest();s.$apply();s.$broadcast(model);if(rs[model]){rs[model]="";rs.$digest();rs.$apply();rs.$broadcast(model)}})}}};commonDirectives.Bootstrap.ScrollLoad=function(){return{restrict:"AEC",link:function(s,el,atts){if(!($("html, body").get(0).scrollHeight>$("html, body").height())){var offsetHeight=document.documentElement.offsetHeight,height=parseFloat(offsetHeight)+100+"px";$("html, body").css({height:height})}$(document).scroll(function(e){if($(window).scrollTop()>=($(document).height()-$(window).height())*.9){if(el.is(":visible")||s.show){if(!s[atts.processing]&&s[atts.newContent]&&!s[atts.backup].done){if(atts.params){s[atts.action](JSON.parse(atts.params))}else{s[atts.action]()}}}}})}}};commonDirectives.Bootstrap.ScrollLimit=function(){return{restrict:"AEC",link:function(s,el,atts){s.limitTo=atts.limitTo?parseInt(atts.limitTo):10;s.makeScrollable=function(){var offsetHeight=document.documentElement.offsetHeight,height=parseFloat(offsetHeight)+100+"px";$("html, body").css({height:height})};if(!($("html, body").get(0).scrollHeight>$("html, body").height())){s.makeScrollable()}$(document).scroll(function(e){if($(window).scrollTop()>=($(document).height()-$(window).height())*.9){s.limitTo+=atts.limit?parseInt(atts.limit):10;s.$apply();s.makeScrollable()}})}}};commonDirectives.Bootstrap.Prefix=function($compile){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template='<div class="small-'+(atts.pl?atts.pl:"2")+' left">'+(!atts.wl?"<label>&nbsp;</label>":"")+'<span class="prefix left column">'+(atts.t?atts.t:'<i class="'+atts.i+'"></i>')+"</span>"+"</div>"+'<div class="small-'+(atts.dl?atts.dl:"10")+' left">'+el.html()+"</div>";el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.Postfix=function($compile){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template='<div class="small-'+(atts.dl?atts.dl:"10")+' left">'+el.html()+"</div>"+'<div class="small-'+(atts.pl?atts.pl:"2")+' left">'+(!atts.wl?"<label>&nbsp;</label>":"")+'<span class="postfix left column">'+(atts.t?atts.t:'<i class="'+atts.i+'"></i>')+"</span>"+"</div>";el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.SaveButton=function($compile){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template="<"+(atts.isButton?'button type="submit"':"a")+" "+' class="button radius right btn_'+atts.name+(atts.class?" "+atts.class:"")+'" '+' ng-click="'+atts.function+'()"> '+'<i class="'+atts.iconClass+'"></i> '+atts.title+"</"+(atts.isButton?"button":"a")+">"+"<img ng-src=\"{{'img/ajax.gif' | baseUrl}}\" "+' class="al_'+atts.name+' right" style="display: none;" />';el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.ThOrder=function($compile){return{restrict:"A",compile:function(el,atts){return function(s,el,atts){var template="<th ng-click=\"pr = '"+atts.t+'\'; rv=!rv" style="cursor: pointer;"'+(atts.ngShow?' ng-show="'+atts.ngShow+'"':"")+">"+'<img ng-src="{{\'img/mss_ic1.png\' | baseUrl}}" alt="" /> '+(atts.title||"&nbsp;")+"</th>";el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.PrintButtons=function($compile){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template='<a data-dropdown="print_drop" class="button success radius" '+' aria-controls="print_drop" aria-expanded="false"> '+' <i class="fa fa-print"></i> Print '+"</a> "+'<ul id="print_drop" class="f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1"> '+'<li><a ng-click="makePdf(\'screen\')" class="button tiny secondary m10"><i class="fa fa-windows"></i> On screen</a></li> '+'<li><a ng-click="makePdf(\'print\')" class="button tiny secondary m10"><i class="fa fa-file-o"></i> Print</a></li> '+'<li><a ng-click="makePdf(\'download\')" class="button tiny secondary m10"><i class="fa fa-arrow-down"></i> Download</a></li> '+"</ul>";el.replaceWith($compile(template)(s));$(document).foundation("dropdown")}}}};commonDirectives.Bootstrap.MenuLink=function($compile,$location){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){rs.isCurrentLink=function(link){return $location.absUrl().indexOf(link)!=-1};rs.doLoading=function(state,link){rs.closeCurrentModal();rs.hideElement(".alertMsg");rs.hideElement(".confirmMsg");if(state=="main"){$("#mainPage").show();$("#uiView").hide()}else if($location.path().indexOf(link)==-1){$("#ajaxLoaderHuge").show();$("#uiView").hide();$("#mainPage").hide()}};var template="<li ng-class=\"{'active': isCurrentLink('"+atts.link+"')}\" "+(atts.show?' ng-show="'+atts.show+'"':"")+(atts.extra||"")+(atts.uiSref?' ui-sref="'+atts.uiSref+'" ng-click="doLoading(\''+atts.uiSref+"', '"+atts.link+"')\"":"")+">"+'<a href="'+atts.link+'">'+(atts.iconClass?'<i class="'+atts.iconClass+'"></i>':"")+" "+atts.title+"</a>"+"</li>";el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.ContentLink=function($compile,$location){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template="<a "+(atts.show?' ng-show="'+atts.show+'"':"")+(atts.extra||"")+(atts.uiSref?' ui-sref="'+atts.uiSref+'" ng-click="doLoading(\''+atts.uiSref+"', '"+atts.link+"')\"":"")+">"+(atts.iconClass?'<i class="'+atts.iconClass+'"></i>':"")+" "+atts.title+"</a>";el.replaceWith($compile(template)(s))}}}};commonDirectives.Bootstrap.AlertConfirmMessages=function($compile){return{restrict:"E",compile:function(el,atts){return function(s,el,atts){var template='<div data-alert class="alert-box alert alertMsg" style="display: none;">'+"<a class=\"right closeMsg\" ng-click=\"fadeOutElement('.alertMsg', 'medium')\">&times;</a> "+" {{$root.alert_message}} "+"</div>"+'<div data-alert class="alert-box success confirmMsg" style="display: none;">'+"{{$root.confirm_message}} "+'<a class="button tiny radius" ng-click="$root.confirmFunc(); hideElement(\'.confirmMsg\')">Yes</a> '+'<a class="button tiny radius" ng-click="hideElement(\'.confirmMsg\')">No</a>'+"</div>";el.replaceWith($compile(template)(s))}}}};var commonFilters=commonFilters||{};commonFilters.Bootstrap={};commonFilters.Bootstrap.Array=function(){return function(items){var filtered=[];a.forEach(items,function(item,item_id){filtered.push(item)});return filtered}};commonFilters.Bootstrap.MongoLink=function(){return function(item,arg){var currentLocation=location.href;if(currentLocation[currentLocation.length-1]!=="/")currentLocation+="/";return currentLocation+item[arg]}};commonFilters.Bootstrap.L=function(config){return function(input){if(input===undefined||input===null||input===""){return""}return config.api_r+(input.charAt(0)=="/"?input:"/"+input)}};commonFilters.Bootstrap.BaseUrl=function(config){return function(input){if(input===undefined||input===null||input===""){return""}return config.api_l+(input.charAt(0)=="/"?input:"/"+input)}};commonFilters.Bootstrap.DobString=function(){return function(date,extra_str){if(date!==undefined){var str="";if(date.match(/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}/)){var today=new Date,newDate=new Date(date),d_timestamp=newDate.getTime(),t_timestamp=today.getTime(),timestamp=t_timestamp-d_timestamp,days=pI(timestamp/864e5),months=pI(timestamp/2592e6),years=0;if(months>12){years=pI(months/12)}months=pI(months-12*years);if(years==0){str=""}else{if(years!=0){if(years==1){str=years+" yr, "}else{str=years+" yrs, "}}}if(years==0&&months==0){str+=days+" days old"}else if(months==0){str+="old"}else{if(months==1){str+=" "+months+" mon. old"}else{str+=" "+months+" mon. old"}}}if(extra_str!==undefined&&str!=""){str=extra_str+" "+str}return str}return""}};commonFilters.Bootstrap.DobStringYear=function(access){return function(date,extra_str){if(date&&date.match(/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}/)){var today=new Date,newDate=new Date(date),d_timestamp=newDate.getTime(),t_timestamp=today.getTime(),timestamp=t_timestamp-d_timestamp,days=pI(timestamp/864e5),months=pI(timestamp/2592e6),years=0;if(months>12){years=pI(months/12)}if(pI(years)>0&&years>=pI(access.alarmPetAgeValue())){return true}}return false}};commonFilters.Bootstrap.GetDate=function(){return function(input){var d=new Date;return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}};commonFilters.Bootstrap.GetTime=function(){return function(input){var d=new Date;return d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()}};commonFilters.Bootstrap.GetDateTime=function(){return function(input){return commonFilters.Bootstrap.getDate()+" "+commonFilters.Bootstrap.getTime()}};commonFilters.Bootstrap.FilterExcludeObjIds=function(){return function(inputArray,excludedObjectIds){var filteredArray=[];a.forEach(excludedObjectIds,function(ids,input_id){a.forEach(inputArray,function(item){if(ids.indexOf(item[input_id])!=-1){if(filteredArray.indexOf(item)==-1){filteredArray.push(item)}}})});return filteredArray.length>0?filteredArray:inputArray}};commonFilters.Bootstrap.FilterRelationship=function(){return function(inputArray,st){var filteredArray=[];if(inputArray.length>0){a.forEach(rs[st.table],function(item,id){if(item[st.cn_id]==rs[st.ev_id]){filteredArray.push(rs[st.at][item[st.an_id]])}})}return filteredArray.length>0?filteredArray:inputArray}};commonFilters.Bootstrap.Slice=function(){return function(arr,start,end){return(arr||[]).slice(start,end)}};commonFilters.Bootstrap.IsEmpty=function(){var bar;return function(obj){for(bar in obj){if(obj.hasOwnProperty(bar)){return false}}return true}};commonFilters.Bootstrap.LastEl=function($filter){return function(array){if(array.length!=0){return array[array.length-1]}else{return null}}};commonFilters.Bootstrap.Capitalize=function(){return function(input,all){return!!input?input.replace(/([^\W_]+[^\s-]*) */g,function(txt){if(txt&&txt.charAt(0)){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}return""}):""}};commonFilters.Bootstrap.HtmlEscape=function(){return function(input){if(!input){return""}input=input.toString();return input.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}};commonFilters.Bootstrap.TextToHtml=function($sce,htmlEscapeFilter){return function(input){if(!input){return""}input=input.toString();input=htmlEscapeFilter(input);var output="";$.each(input.split("\n\n"),function(key,paragraph){output+="<p>"+paragraph+"</p>"});return $sce.trustAsHtml(output)}};var convertsRun=function($filter){rs.convertTelNumber=function(scope_id,t,n,t_id){var scope=$(scope_id).scope(),val=scope[t][n],p_id=rs.user_interface_settings[t_id];var part1="",part2="",part3="";if(p_id==1){if(val&&val.match(/[0-9]{10}/g)&&val.length==10){part1=val.substring(0,3);part2=val.substring(3,6);part3=val.substring(6,10);scope[t][n]="("+part1+") "+part2+"-"+part3}}else if(p_id==2){if(val&&val.match(/07[0-9]{8}/g)&&val.length==10){part1=val.substring(0,4);part2=val.substring(4,10);scope[t][n]=part1+" "+part2}}};rs.getTelErrorText=function(n){var fid={};if(rs.user_interface_settings){if(rs.user_interface_settings[n]){if(rs.tel_formats){if(rs.tel_formats[rs.user_interface_settings[n]]){return rs.tel_formats[rs.user_interface_settings[n]].error_text||""}}}}return""};rs.convertToUpperCase=function(scope_id,t,n){var scope=$(scope_id).scope(),val=scope[t][n];if(val){scope[t][n]=val.toUpperCase()}};rs.convertToMaxlength=function(scope_id,t,n,maxlength){var scope=$(scope_id).scope(),val=scope[t][n];if(val){scope[t][n]=val.substring(0,maxlength)}};rs.focusOnId=function(id){$("#"+id).focus()};rs.getCurrentDate=function(date){var today={};if(date){today=date}else{today=new Date}var dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();if(dd<10)dd="0"+dd;if(mm<10)mm="0"+mm;today=yyyy+"-"+mm+"-"+dd;return today};rs.getYear=function(){var date=new Date;return date.getFullYear()};rs.getCurrentTime=function(){var today=new Date,hh=today.getHours(),mm=today.getMinutes(),ss=today.getSeconds();if(parseInt(mm)<=9)mm="0"+mm;if(parseInt(ss)<=9)ss="0"+ss;return hh+":"+mm+":"+ss};rs.getCDT=function(){return rs.getCurrentDate()+" "+rs.getCurrentTime()};rs.getTime=function(date){return new Date(date).getTime()};rs.isArray=function(item){return Object.prototype.toString.call(item)=="[object Array]"};rs.isObject=function(item){return Object.prototype.toString.call(item)=="[object Object]"};rs.isEmpty=function(item){for(var prop in item){if(item.hasOwnProperty(prop))return false}return true};rs.isFloat=function(n,is_string){if(is_string){return!isNaN(n)&&n!==null&&n!==""&&n.toString().indexOf(".")!=-1}else{return n===+n&&n!==(n|0)}};rs.isInteger=function(n,is_string){if(is_string){return!isNaN(n)&&n!==null&&n!==""&&n.toString().indexOf(".")==-1}else{return n===+n&&n===(n|0)}};rs.isNumberic=function(n){if(rs.isInteger(n)||rs.isFloat(n)){return true}return false};rs.rnt=function(nr){var array_o={};for($i=1;$i<=nr;$i++){array_o[$i]={id:$i,v:$i}}return array_o};rs.rna=function(nr,from){var array=[];for($i=from||1;$i<=nr;$i++){array.push($i)}return array};rs.orderByKeys=function(obj,type){var return_obj={},keys=Object.keys(obj),i,len=keys.length;if(type=="reverse"){keys.reverse()}else{keys.sort()}for(i=0;i<len;i++){k=keys[i];return_obj[k]=obj[k]}return return_obj};rs.checkArr=function(in_object,id_array,key,check_value){var result=false;a.forEach(id_array,function(id){if(in_object[id][key]!=check_value){result=true;return false}});return result};rs.makeWatchTables=function(obj_in){if(!rs.isEmpty(obj_in)){var watch_collection="[";a.forEach(obj_in,function(item){watch_collection+=item+", "});watch_collection=watch_collection.substring(0,watch_collection.length-2);watch_collection+="]";return watch_collection}else{return""}};rs.refreshPage=function(){location.reload()};rs.ma=function(in_obj){if(rs.isObject(in_obj)){return $filter("array")(in_obj)}else if(in_obj){return in_obj}else{return[]}};rs.lastEl=function(in_obj){if(in_obj){if(rs.isObject(in_obj)){in_obj=$filter("array")(in_obj)}return in_obj[in_obj.length-1]}};rs.openTab=function(hide_tabs,open_tab,open_tab_active){$(hide_tabs).find(".content").hide();$(hide_tabs).find("dd").removeClass("active");$(open_tab).fadeIn("medium");$(open_tab_active).addClass("active")};rs.setOneYear=function(scope,t,n){oneYr=new Date;oneYr.setYear(oneYr.getFullYear()+1);var one_year=rs.getCurrentDate(oneYr);if(scope&&t&&n){scope=$(scope).scope();scope[t][n]=one_year}else{return one_year}};rs.unbind=function(obj){return JSON.parse(JSON.stringify(obj))};rs.guid=function(){return"a"+Math.floor((1+Math.random())*65536).toString(16).substring(1)};rs.guid_long=function(){return"l"+Math.random()+Math.random()+Math.random()+Math.random()};rs.uid=function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()};rs.lowercaseUnderscore=function(value){if(!value){return""}value=value.toString();value=value.toLowerCase();value=value.replace(/  /g," ");value=value.replace(/ /g,"_");return value};rs.getTimeTimestamp=function(value){if(!value){return""}var arr=value.split(":"),h=arr[0],m=arr[1],s=arr[2]||0,r=pF(h)*60*60+pF(m)*60+pF(s);return r}};var scrollUpRun=function(){$(document).ready(function(){var mainContent=document.getElementById("mainContent"),body=$("body");mainContent.style.height=body.innerHeight()+"px";$("#pet-info").css("height",body.innerHeight()-80+"px");$(".pet-rsv").css("height",body.innerHeight()-150+"px");$("#leftMenu").css("height",body.innerHeight()-80+"px");mainContent.addEventListener("scroll",function(){if($(this).scrollTop()>100){$(".scrollup").fadeIn()}else{$(".scrollup").fadeOut()}},false);$(".scrollup").click(function(){mainContent.scrollTop=0;return false})})};var loadingMaskRun=function(){var loadingMaskModels=document.getElementById("loading-mask-models");rs.is_models=false;rs.$on("loading:progress",function(){if(rs.is_models){loadingMaskModels.style.display="block";rs.is_models=false}});rs.$on("loading:finished",function(){loadingMaskModels.style.display="none";rs.is_models=false});window.onload=function(){document.getElementById("loading-mask-resources").style.display="none"}};var foundationRun=function(){$(document).foundation({abide:{patterns:{number:/[0-9]/,time_pattern:/[0-9]{2}\:[0-9]{2}(\:[0-9]{2})?/}}})};var configConstant={api:"",api_r:"",api_l:"",token:"",env:"",kennel:""};var settings_tables_arr=["settings","daycare_settings","boarding_settings","promotions_settings","tax_settings","user_interface_settings"];var general_tables_arr=["role","users","security_levels","general_features","sl_cp","clients","pets","cp","pet_type","pet_breed","pet_sex","pet_size","pet_color","pet_status","pet_vet","client_status","stay_reasons","grooming_options","grooming_priority","grooming_rates","grooming_services","grooming_commissions","boarding_petsizes","boarding_runtypes","schedule_services","meds","meds_type","md_dosage","md_dose_type","diets","diets_type","payment_types","vets","client_survey_income","client_survey_findout","retail_inventory","retail_classes","retail_vendors","retail_vi","r_boarding","r_daycare","r_grooms","r_training","r_ss","r_meds","r_diets","clients_survey","training_groups","training_options","training_schedule","daycare_groups","records_daycare","records_boarding","records_services","records_grooming","records_training","records_meds_diets","notepads","sticky","files","promotions","layout_sections","layout_runs","discounts_boarding_long_term","discounts_boarding_multiple_pet","discounts_boarding_new_client","discounts_boarding_priority_club","holiday","season","languages","tokens","clients_membership","pos_payments","payments","deposits","clients_rewards","clients_private","messages","boarding_payments","daycare_payments","grooms_payments","training_payments"];var mainApp=angular.module("mainApp",["ngCookies"]);mainApp.config(["$httpProvider",function($httpProvider){$httpProvider.defaults.useXDomain=true;delete $httpProvider.defaults.headers.common["X-Requested-With"]}]);mainApp.config(["$provide",function($provide){$provide.decorator("$controller",["$delegate",function($delegate){return function(constructor,locals){if(typeof constructor=="string"){locals.$scope.controllerName=constructor}return $delegate(constructor,locals)}}])}]);mainApp.factory("transformRequestAsFormPost",transformRequestAsFormPost);mainApp.factory("httpInterceptor",httpInterceptor).config(function($httpProvider){$httpProvider.interceptors.push("httpInterceptor")});mainApp.run(function($http,$rootScope){$http.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";rs=$rootScope;a=angular;pF=parseFloat;pI=parseInt;c=console;c.l=c.log});mainApp.service("api",apiService);mainApp.service("models",modelsService);mainApp.filter("l",commonFilters.Bootstrap.L);mainApp.run(convertsRun);mainApp.run(scrollUpRun);mainApp.run(loadingMaskRun);mainApp.run(foundationRun);mainApp.directive("menuLink",commonDirectives.Bootstrap.MenuLink);mainApp.controller("MainCtrl",mainCtrl);mainApp.constant("config",configConstant);var initModels=function(models,$cookies){rs.cookies=$cookies;models.getModels(settings_tables_arr,null,"multiple_login",{filter:{order:"id desc"},get_with:"id"}).then(function(){rs.parseStyle("settings","#fromStyle","#toStyle")})};